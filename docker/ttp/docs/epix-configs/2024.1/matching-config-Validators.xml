<?xml version="1.0" encoding="UTF-8"?>
<!-- ###license-information-start### E-PIX - Enterprise Identifier Cross-Referencing __ Copyright (C) 2009 - 2020 The MOSAIC Project - Institut fuer Community 
	Medicine der Universitaetsmedizin Greifswald - mosaic-projekt@uni-greifswald.de concept and implementation c. schack, l. geidel, d. langner, g. koetzschke 
	web client a. blumentritt please cite our publications http://dx.doi.org/10.3414/ME14-01-0133 http://dx.doi.org/10.1186/s12967-015-0545-6 __ This program 
	is free software: you can redistribute it and/or modify it under the terms of the GNU Affero General Public License as published by the Free Software Foundation, 
	either version 3 of the License, or (at your option) any later version. This program is distributed in the hope that it will be useful, but WITHOUT ANY 
	WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for more details. 
	You should have received a copy of the GNU Affero General Public License along with this program. If not, see <http://www.gnu.org/licenses/>. ###license-information-end### -->

<ma:MatchingConfiguration xmlns:ma="http://www.ttp.icmvc.emau.org/deduplication/config/model"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://www.ttp.icmvc.emau.org/deduplication/config/model matching-config-2.9.0.xsd ">
	<matching-mode>MATCHING_IDENTITIES</matching-mode>
	<mpi-generator>org.emau.icmvc.ttp.epix.gen.impl.EAN13Generator</mpi-generator>
	<mpi-prefix>1001</mpi-prefix>
	<use-notifications>false</use-notifications>
	<limit-search-to-reduce-memory-consumption>false</limit-search-to-reduce-memory-consumption>
	<persist-mode>IDENTIFYING</persist-mode>

	<required-fields>
		<name>firstName</name>
		<name>lastName</name>
		<name>birthDate</name>
		<name>gender</name>
	</required-fields>
	<value-fields-mapping>
		<value1>Alphabet</value1>
		<value2>Hier immer A</value2>
		<value3>Hier immer B</value3>
		<value4>Postleitzahl</value4>
		<value5>KV-Nummer</value5>
		<value6>Telefon</value6>
		<value7>E-Mail</value7>
		<value8>Balanced Bloom Filter</value8>
		<value9>Base64</value9>
		<value10>Länge von 5</value10>
	</value-fields-mapping>
	<deduplication>
		<reason>
			<name>TYPING_ERROR</name>
			<description>TYPING_ERROR.description</description>
		</reason>
		<reason>
			<name>NAME_CHANGE_MARRIAGE</name>
			<description>NAME_CHANGE_MARRIAGE.description</description>
		</reason>
	</deduplication>
	<validation>
		<validator-config>
			<field>value1</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.AlphabetValidator</qualified-class-name>
				<validation-criterion>ABCDEFGHIJKLMNOPQRSTUVWXYZ</validation-criterion>
			</validator>
		</validator-config>
		<validator-config>
			<field>value2</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.AlphabetValidator</qualified-class-name>
				<validation-criterion>A</validation-criterion>
			</validator>
		</validator-config>
		<validator-config>
			<field>value3</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.RegExValidator</qualified-class-name>
				<validation-criterion>B</validation-criterion>
			</validator>
		</validator-config>
		<validator-config>
			<field>value4</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.GermanZipCodeValidator</qualified-class-name>
			</validator>
		</validator-config>
		<validator-config>
			<field>value5</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.EGKValidator</qualified-class-name>
			</validator>
		</validator-config>
		<validator-config>
			<field>value6</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.PhoneNumberValidator</qualified-class-name>
				<validation-criterion>A</validation-criterion>
			</validator>
		</validator-config>
		<validator-config>
			<field>value7</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.EMailValidator</qualified-class-name>
			</validator>
		</validator-config>
		<validator-config>
			<field>value8</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.BalancedBloomFilterValidator</qualified-class-name>
				<validation-criterion>2000</validation-criterion>
			</validator>
		</validator-config>
		<validator-config>
			<field>value9</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.Base64Validator</qualified-class-name>
			</validator>
		</validator-config>
		<validator-config>
			<field>value10</field>
			<validator>
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.LengthValidator</qualified-class-name>
				<validation-criterion>5</validation-criterion>
			</validator>
		</validator-config>
		<validator-config>
			<field>lastName</field>
			<validator-group>
				<validator-group>
					<validator>
						<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.RegExValidator</qualified-class-name>
						<validation-criterion>[A-za-zßüöäÜÖÄß]*</validation-criterion>
					</validator>
					<link>AT_LEAST_ONE</link>
				</validator-group>
				<validator-group>
					<validator>
						<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.AlphabetValidator</qualified-class-name>
						<validation-criterion>0123456789</validation-criterion>
					</validator>
					<validator>
						<qualified-class-name>org.emau.icmvc.ttp.deduplication.impl.validation.LengthValidator</qualified-class-name>
						<validation-criterion>3</validation-criterion>
					</validator>
					<link>ALL</link>
				</validator-group>
				<link>AT_LEAST_ONE</link>
			</validator-group>
		</validator-config>
	</validation>
	<privacy>
		<bloomfilter-config>
			<algorithm>org.emau.icmvc.ttp.deduplication.impl.bloomfilter.RandomHashingStrategy</algorithm>
			<field>value8</field>
			<length>1000</length>
			<ngrams>2</ngrams>
			<bits-per-ngram>15</bits-per-ngram>
			<fold>1</fold>
			<alphabet>ABCDEFGHIJKLMNOPQRSTUVWXYZ .-0123456789mfoux</alphabet>
			<balanced>
				<seed>4623829476</seed>
			</balanced>
			<source-field>
				<name>firstName</name>
				<seed>456542343</seed>
			</source-field>
			<source-field>
				<name>lastName</name>
				<seed>374027465</seed>
			</source-field>
			<source-field>
				<name>gender</name>
				<seed>29465653282</seed>
			</source-field>
		</bloomfilter-config>
	</privacy>
	<preprocessing-config>
		<preprocessing-field>
			<field-name>firstName</field-name>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>?</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>é</input-pattern>
				<output-pattern>e</output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Dr.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Prof.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>med.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>rer.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>nat.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Ing.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Dipl.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>,</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>-</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<complex-transformation-type xsi:type="ma:ComplexTransformation">
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.preprocessing.impl.ToUpperCaseTransformation</qualified-class-name>
			</complex-transformation-type>
			<complex-transformation-type xsi:type="ma:ComplexTransformation">
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.preprocessing.impl.CharsMutationTransformation</qualified-class-name>
			</complex-transformation-type>
		</preprocessing-field>
		<preprocessing-field>
			<field-name>lastName</field-name>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>?</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>é</input-pattern>
				<output-pattern>e</output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Dr.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Prof.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>med.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>rer.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>nat.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Ing.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>Dipl.</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>,</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>
				</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<simple-transformation-type xsi:type="ma:SimpleTransformation">
				<input-pattern>-</input-pattern>
				<output-pattern></output-pattern>
			</simple-transformation-type>
			<complex-transformation-type xsi:type="ma:ComplexTransformation">
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.preprocessing.impl.ToUpperCaseTransformation</qualified-class-name>
			</complex-transformation-type>
			<complex-transformation-type xsi:type="ma:ComplexTransformation">
				<qualified-class-name>org.emau.icmvc.ttp.deduplication.preprocessing.impl.CharsMutationTransformation</qualified-class-name>
			</complex-transformation-type>
		</preprocessing-field>
	</preprocessing-config>
	<matching>
		<threshold-possible-match>2.99</threshold-possible-match>
		<threshold-automatic-match>14.5</threshold-automatic-match>
		<use-cemfim>false</use-cemfim>
		<parallel-matching-after>1000</parallel-matching-after>
		<number-of-threads-for-matching>4</number-of-threads-for-matching>
		<field>
			<name>firstName</name>
			<blocking-threshold>0.4</blocking-threshold>
			<matching-threshold>0.8</matching-threshold>
			<weight>8</weight>
			<algorithm>org.emau.icmvc.ttp.deduplication.impl.LevenshteinAlgorithm</algorithm>
			<multiple-values>
				<separator> </separator>
				<penalty-not-a-perfect-match>0.1</penalty-not-a-perfect-match>
				<penalty-one-short>0.1</penalty-one-short>
				<penalty-both-short>0.2</penalty-both-short>
			</multiple-values>
		</field>
		<field>
			<name>lastName</name>
			<matching-threshold>0.8</matching-threshold>
			<weight>6</weight>
			<algorithm>org.emau.icmvc.ttp.deduplication.impl.LevenshteinAlgorithm</algorithm>
		</field>
		<field>
			<name>gender</name>
			<matching-threshold>0.75</matching-threshold>
			<weight>3</weight>
			<algorithm>org.emau.icmvc.ttp.deduplication.impl.LevenshteinAlgorithm</algorithm>
		</field>
		<field>
			<name>birthDate</name>
			<blocking-threshold>0.6</blocking-threshold>
			<blocking-mode>NUMBERS</blocking-mode>
			<matching-threshold>1</matching-threshold>
			<weight>9</weight>
			<algorithm>org.emau.icmvc.ttp.deduplication.impl.LevenshteinAlgorithm</algorithm>
		</field>
	</matching>
</ma:MatchingConfiguration>
